{% extends "admin/change_form.html" %}
{% load i18n admin_urls static admin_modify %}

{% block content %}
<div id="content-main">
  <form {% if has_file_field %}enctype="multipart/form-data" {% endif %}action="{{ form_url }}" method="post" id="{{ opts.model_name }}_form" novalidate>
    {% csrf_token %}
    {% block form_top %}{% endblock %}
    
    {# 日付フィールド #}
    <fieldset class="module aligned">
      {% for field in adminform.form.fields_for_model %}
        {% if field.name == 'date' %}
          <div class="form-row">
            {{ field.errors }}
            {{ field.label_tag }}
            {{ field }}
          </div>
        {% endif %}
      {% endfor %}
    </fieldset>

    {# 作業詳細 #}
    {% for inline_admin_formset in inline_admin_formsets %}
      {% include inline_admin_formset.opts.template %}
    {% endfor %}

    {# コメントフィールド #}
    <fieldset class="module aligned">
      <h2>コメント</h2>
      <div class="form-row">
        <textarea name="comment" rows="4" style="width: 100%;"></textarea>
      </div>
    </fieldset>

    {# 確認・報告事項 #}
    <fieldset class="module aligned">
      {% for field in adminform.form.fields_for_model %}
        {% if field.name == 'boss_confirmation' or field.name == 'remarks' %}
          <div class="form-row">
            {{ field.errors }}
            {{ field.label_tag }}
            {{ field }}
          </div>
        {% endif %}
      {% endfor %}
    </fieldset>

    {% block after_field_sets %}{% endblock %}
    {% block after_related_objects %}{% endblock %}

    {% block submit_buttons_bottom %}{% include "admin/submit_line.html" %}{% endblock %}
  </form>
</div>
{% endblock %} 